desc: Test using HTTP multipart/form-data
runners:
  req:
    endpoint: ${TEST_HTTP_END_POINT:-https:example.com}
    openapi3: ../openapi3.yml
vars:
  baseDir: ${TEST_BASE_DIR}
steps:
  fileupload:
    desc: Post /upload
    req:
      /upload:
        post:
          body:
            multipart/form-data:
              username: bob
              upload0: "{{ vars.baseDir }}/testdata/dummy.png"
              upload1: "{{ vars.baseDir }}/testdata/dummy.jpeg"
    test: |
      current.res.status == 201
